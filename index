<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Ruleta de Premios</title>

    <style>
        :root { 
            --deep-purple: #1a0b2e;
            --main-purple: #8e54e9;
            --magenta: #d946ef;
            --white: #ffffff;
            --gold: #ffd700;
        }

        body { 
            margin: 0; 
            overflow: hidden; 
            font-family: 'Segoe UI', Roboto, Arial, sans-serif; 
            background: radial-gradient(circle, #462c7a 0%, #1a0b2e 100%); 
            color: var(--white);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .screen {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
            width: 100%;
        }

        /* Contenedor de la Ruleta */
        .wheel-box { 
            position: relative; 
            width: 90vw; 
            max-width: 450px; 
            aspect-ratio: 1/1;
            margin: 20px 0;
            border-radius: 50%;
            box-shadow: 0 0 50px rgba(0,0,0,0.8), 0 0 20px rgba(142, 84, 233, 0.5);
            border: 8px solid #33a8ff; /* Aro azul brillante como la imagen */
        }

        canvas { 
            width: 100%; 
            height: 100%; 
            border-radius: 50%;
        }
        
        /* Marcador Superior */
        .wheel-arrow {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 50px;
            background: #33a8ff;
            clip-path: polygon(50% 100%, 0 0, 100% 0);
            z-index: 30;
            filter: drop-shadow(0 2px 5px rgba(0,0,0,0.5));
        }

        /* BotÃ³n Central */
        .wheel-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80px;
            height: 80px;
            background: radial-gradient(circle, #33a8ff 0%, #1a75ff 100%);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: 900;
            color: white;
            z-index: 35;
            box-shadow: 0 0 15px rgba(0,0,0,0.5), inset 0 0 10px rgba(255,255,255,0.5);
            cursor: pointer;
            border: 4px solid white;
            font-size: 14px;
            text-transform: uppercase;
        }

        /* Estilos de Formulario */
        #step-registro { 
            display: none; 
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(26, 11, 46, 0.95);
            z-index: 100;
        }

        .form-box { width: 85%; max-width: 340px; }
        input { 
            width: 100%; margin: 10px 0; padding: 15px; border: none; border-radius: 10px; 
            font-size: 16px; box-sizing: border-box; 
        }

        .btn-action {
            background: linear-gradient(to right, var(--magenta), var(--main-purple));
            color: white; border: none; padding: 15px 30px;
            border-radius: 12px; font-weight: 800; cursor: pointer;
            text-transform: uppercase; margin-top: 15px; width: 100%;
        }

        #txtPremio {
            font-size: 2rem;
            color: var(--gold);
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
            margin-top: 20px;
            font-weight: 800;
        }
    </style>
</head>
<body>

    <div id="wheel-container" class="screen">
        <h1 style="font-weight: 800; margin-bottom: 5px; font-size: 1.5rem;">Â¡GIRA Y GANA!</h1>
        <div class="wheel-box">
            <div class="wheel-arrow"></div>
            <canvas id="canvasWheel"></canvas>
            <div class="wheel-center" id="btnSpin">GIRAR</div>
        </div>
        <p id="txtPremio"></p>
    </div>

    <div id="step-registro" class="screen">
        <div class="form-box">
            <h2 id="label-ganaste" style="color: var(--gold);">Â¡FELICIDADES!</h2>
            <p>DÃ©janos tus datos para entregarte tu premio.</p>
            <input type="text" id="nombre" placeholder="Nombre completo">
            <input type="tel" id="whatsapp" placeholder="WhatsApp (10 dÃ­gitos)">
            <div style="font-size: 12px; text-align: left; margin-top: 10px;">
                <input type="checkbox" id="aviso"> <label for="aviso">Acepto tÃ©rminos y condiciones.</label>
            </div>
            <button class="btn-action" onclick="enviarWhatsApp()">RECLAMAR POR WHATSAPP</button>
        </div>
    </div>

    <script>
        // --- CONFIGURACIÃ“N DE PREMIOS ---
        const premios = [
            "PREMIO 1", "PREMIO 2", "PREMIO 3", "PREMIO 4", 
            "PREMIO 5", "PREMIO 6", "PREMIO 7", "PREMIO 8",
            "PREMIO 9", "PREMIO 10", "PREMIO 11", "PREMIO 12",
            "PREMIO 13", "PREMIO 14", "PREMIO 15", "JACKPOT"
        ];

        // Colores inspirados en la imagen
        const colores = [
            "#ff4e00", "#ff8c00", "#ffb700", "#8e54e9", 
            "#d946ef", "#9c27b0", "#673ab7", "#3f51b5",
            "#2196f3", "#03a9f4", "#00bcd4", "#009688",
            "#4caf50", "#8bc34a", "#cddc39", "#000000" // Negro para el Jackpot
        ];
        
        let canvas = document.getElementById('canvasWheel');
        let ctx = canvas.getContext('2d');
        canvas.width = 600; canvas.height = 600;
        
        let startAngle = 0;
        let arc = Math.PI / (premios.length / 2);
        let premioFinal = "";

        function draw() {
            ctx.clearRect(0,0,600,600);
            const centerX = 300;
            const centerY = 300;
            const radius = 290;

            for(let i = 0; i < premios.length; i++) {
                let angle = startAngle + i * arc;
                ctx.fillStyle = colores[i];
                
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.arc(centerX, centerY, radius, angle, angle + arc, false);
                ctx.lineTo(centerX, centerY);
                ctx.fill();

                // Bordes de los gajos
                ctx.strokeStyle = "rgba(255,255,255,0.2)";
                ctx.stroke();

                // Texto de los premios
                ctx.save();
                ctx.fillStyle = "white";
                ctx.translate(centerX + Math.cos(angle + arc/2) * 200, centerY + Math.sin(angle + arc/2) * 200);
                ctx.rotate(angle + arc/2 + Math.PI/2);
                ctx.font = 'bold 16px Arial';
                const text = premios[i];
                ctx.fillText(text, -ctx.measureText(text).width/2, 0);
                ctx.restore();
            }
        }

        document.getElementById('btnSpin').addEventListener('click', () => {
            document.getElementById('btnSpin').style.pointerEvents = 'none';
            document.getElementById('btnSpin').style.opacity = '0.7';
            
            // ConfiguraciÃ³n de giro (MÃ¡s tiempo y aleatoriedad)
            let spinAngleStart = Math.random() * 10 + 25;
            let spinTime = 0;
            // Aumentado a ~7-8 segundos (7500ms)
            let spinTimeTotal = Math.random() * 2000 + 6000; 

            function rotate() {
                spinTime += 30;
                if(spinTime >= spinTimeTotal) {
                    stopRotate();
                    return;
                }
                let progress = spinTime / spinTimeTotal;
                // Cubic ease-out para un frenado suave
                let ease = 1 - Math.pow(1 - progress, 3);
                startAngle += ((spinAngleStart * (1 - ease)) * Math.PI / 180);
                draw();
                requestAnimationFrame(rotate);
            }
            rotate();
        });

        function stopRotate() {
            let degrees = startAngle * 180 / Math.PI + 90;
            let arcd = arc * 180 / Math.PI;
            let index = Math.floor((360 - degrees % 360) / arcd);
            if (index < 0) index = premios.length + index;
            
            premioFinal = premios[index];
            document.getElementById('txtPremio').innerText = "Â¡" + premioFinal + "!";
            
            setTimeout(() => {
                document.getElementById('step-registro').style.display = 'flex';
                document.getElementById('label-ganaste').innerText = "Â¡GANASTE " + premioFinal + "!";
            }, 1500);
        }

        function enviarWhatsApp() {
            const nom = document.getElementById('nombre').value;
            const tel = document.getElementById('whatsapp').value;
            if(!nom || tel.length < 10 || !document.getElementById('aviso').checked) {
                alert("Por favor, llena tus datos correctamente."); return;
            }
            const msg = encodeURIComponent(`*NUEVO PREMIO RULETA*\nðŸ† Premio: ${premioFinal}\nðŸ‘¤ Cliente: ${nom}\nðŸ“± WhatsApp: ${tel}`);
            window.location.href = `https://wa.me/5215542492026?text=${msg}`;
        }

        draw();
    </script>
</body>
</html>
